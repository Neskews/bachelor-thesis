<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="../../../src/jquery.js" charset="utf-8"></script>
  </head>
  <body>
    <script type="text/javascript">
      const U = 'http://localhost:3000';
      const C = 'Custom-Header';
      const V = 'custom-header-value';
      const T = 'text/html';
      const D = {};
      const S = (data, status, jqXHR) => {
        if (data.currentTarget) {
          alert('[ECMA variant]');
        } else {
          alert('[jQuery variant]');
        }
      }

      /* NEEDS TO WORK SOON! */
      // $.ajaxSetup({
      //   headers: {'Content-Type': 'text/html'}
      // })

      function setupJq() {
        $.get(U, D, S, T);
      }

      function setupEcma() {
        XMLHttpRequest.prototype.origOpen = XMLHttpRequest.prototype.open;
        XMLHttpRequest.prototype.open = () => {
          console.log(this);
          this.open.apply(this, arguments);
          this.setRequestHeader(C, V);
        };

        const X = new XMLHttpRequest();
        X.onload = S;
        X.open('GET', U);
        X.send();
      }
    </script>
    <button onclick="setupJq()">jQuery setup</button>
    <button onclick="setupEcma()">ecma setup</button>

  </body>
</html>
